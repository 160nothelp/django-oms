webpackJsonp([70],{"/bgF":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"",""])},fMbZ:function(t,e,a){var o=a("/bgF");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("6c42982d",o,!0)},ypTP:function(t,e,a){"use strict";function o(t){a("fMbZ")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("jtw6"),l={components:{},data:function(){var t=this;return{tableData:[],tabletotal:0,dnsapis:[],domain_searchDef:{colProps:{span:24}},record_searchDef:{colProps:{span:8}},listQuery:{dnsname:""},paginationDef:{show:!1},showrecord:!1,recordData:[],actionsDef:{colProps:{span:16},def:[{name:"添加",icon:"el-icon-plus",handler:function(){t.addForm=!0}}]},addForm:!1,ruleForm:{action:"create",dnsname:"",domain:"",sub_domain:"",value:"",record_type:"A",ttl:600},record_types:["A","CNAME"],editForm:!1,rowdata:{},actionColDef:{label:"操作",tableColProps:{align:"center"},def:[{handler:function(e){t.editForm=!0,t.rowdata={action:"update",sub_domain:e.name,record_type:e.type,value:e.data,ttl:e.ttl}},buttonProps:{type:"success"},name:"编辑"}]}}},created:function(){this.fetchDnsapiData()},methods:{fetchData:function(t){var e=this;this.listQuery.dnsname=t,Object(r.e)(this.listQuery).then(function(t){e.tableData=t.data,e.tabletotal=t.data.length})},fetchDnsapiData:function(){var t=this,e={type:"godaddy"};Object(r.b)(e).then(function(e){t.dnsapis=e.data,t.fetchData(t.dnsapis[0].name)})},fetchRecordData:function(){var t=this,e={dnsname:this.listQuery.dnsname,domain:this.ruleForm.domain};this.ruleForm.dnsname=this.listQuery.dnsname,Object(r.f)(e).then(function(e){t.recordData=e.data})},handleClick:function(t){this.fetchData(t.name)},handleRowClick:function(t){this.showrecord=!0,this.ruleForm.domain=t.domain,this.fetchRecordData()},addGroupSubmit:function(){var t=this;Object(r.i)(this.ruleForm).then(function(){t.$message({message:"恭喜你，添加成功",type:"success"}),t.fetchRecordData(),t.addForm=!1}).catch(function(e){t.$message.error("添加失败"),console.log(e)})},editGroupSubmit:function(){var t=this;this.rowdata.dnsname=this.ruleForm.dnsname,this.rowdata.domain=this.ruleForm.domain,Object(r.i)(this.rowdata).then(function(){t.$message({message:"恭喜你，修改成功",type:"success"}),t.fetchRecordData(),t.editForm=!1}).catch(function(e){t.$message.error("修改失败"),console.log(e)})}}},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-container",staticStyle:{height:"100vh"}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.listQuery.dnsname,callback:function(e){t.$set(t.listQuery,"dnsname",e)},expression:"listQuery.dnsname"}},t._l(t.dnsapis,function(e){return a("el-tab-pane",{key:e.id,attrs:{label:e.name,name:e.name}},[a("data-tables",{attrs:{data:t.tableData,"search-def":t.domain_searchDef,"pagination-def":t.paginationDef},on:{"row-click":t.handleRowClick}},[a("el-table-column",{attrs:{prop:"domain",label:"域名",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",sortable:"custom"}})],1)],1)}))],1),t._v(" "),a("el-col",{attrs:{span:18}},[t.showrecord?a("el-card",[a("data-tables",{attrs:{data:t.recordData,"actions-def":t.actionsDef,"action-col-def":t.actionColDef,"search-def":t.record_searchDef,"pagination-def":t.paginationDef}},[a("el-table-column",{attrs:{prop:"name",label:"记录",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data",label:"值",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ttl",label:"ttl",sortable:"custom"}})],1)],1):t._e()],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.addForm},on:{"update:visible":function(e){t.addForm=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"sub_domain"}},[a("el-input",{model:{value:t.ruleForm.sub_domain,callback:function(e){t.$set(t.ruleForm,"sub_domain",e)},expression:"ruleForm.sub_domain"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"record_type"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.ruleForm.record_type,callback:function(e){t.$set(t.ruleForm,"record_type",e)},expression:"ruleForm.record_type"}},t._l(t.record_types,function(t){return a("el-option",{key:t.id,attrs:{value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"ip",prop:"value"}},[a("el-input",{model:{value:t.ruleForm.value,callback:function(e){t.$set(t.ruleForm,"value",e)},expression:"ruleForm.value"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"ttl",prop:"ttl"}},[a("el-input",{model:{value:t.ruleForm.ttl,callback:function(e){t.$set(t.ruleForm,"ttl",e)},expression:"ruleForm.ttl"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addGroupSubmit("ruleForm")}}},[t._v("立即创建")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.editForm},on:{"update:visible":function(e){t.editForm=e}}},[a("el-form",{ref:"rowdata",attrs:{model:t.rowdata,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"sub_domain"}},[a("el-input",{attrs:{disabled:""},model:{value:t.rowdata.sub_domain,callback:function(e){t.$set(t.rowdata,"sub_domain",e)},expression:"rowdata.sub_domain"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"record_type"}},[a("el-input",{attrs:{disabled:""},model:{value:t.rowdata.record_type,callback:function(e){t.$set(t.rowdata,"record_type",e)},expression:"rowdata.record_type"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"值",prop:"value"}},[a("el-input",{model:{value:t.rowdata.value,callback:function(e){t.$set(t.rowdata,"value",e)},expression:"rowdata.value"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"ttl",prop:"ttl"}},[a("el-input",{model:{value:t.rowdata.ttl,callback:function(e){t.$set(t.rowdata,"ttl",e)},expression:"rowdata.ttl"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editGroupSubmit("rowdata")}}},[t._v("立即修改")])],1)],1)],1)],1)},s=[],i={render:n,staticRenderFns:s},c=i,d=a("VU/8"),u=o,m=d(l,c,!1,u,null,null);e.default=m.exports}});