webpackJsonp([3,28,29],{"+1zf":function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,"",""])},"+I9n":function(e,t,r){var a=r("WoU3");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("1d474cdb",a,!0)},PyEn:function(e,t,r){var a=r("+1zf");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("05d6a13c",a,!0)},Vt6Z:function(e,t,r){"use strict";function a(e){r("+I9n")}Object.defineProperty(t,"__esModule",{value:!0});var s=r("Dd8w"),o=r.n(s),l=r("vMJZ"),i=r("QmSG"),n=r("h+OL"),u=r("n4T2"),c=r("NYxO"),m={components:{addUser:n.default,editUser:u.default},data:function(){return{tableData:[],tabletotal:0,currentPage:1,pagesize:i.pagesize,pageformat:i.pageformat,listQuery:{id__gt:1,limit:i.LIMIT,offset:"",search:""},addForm:!1,editForm:!1,rowdata:{},selectId:[],butstatus:!0}},created:function(){this.fetchData()},computed:o()({},Object(c.b)(["username"])),methods:{fetchData:function(){var e=this;Object(l.f)(this.listQuery).then(function(t){e.tableData=t.data.results,e.tabletotal=t.data.count})},getDialogStatus:function(e){this.editForm=e,this.addForm=e,setTimeout(this.fetchData,3e3)},handleEdit:function(e){this.editForm=!0,this.rowdata=e,setTimeout(this.fetchData,1e3)},handleSelectionChange:function(e){this.selectId=[];for(var t=0,r=e.length;t<r;t++)this.selectId.push(e[t].id);this.selectId.length>0?this.butstatus=!1:this.butstatus=!0},searchClick:function(){this.fetchData()},handleSizeChange:function(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange:function(e){this.listQuery.offset=(e-1)*i.LIMIT,this.fetchData()},deleteForm:function(){for(var e=this,t=0,r=this.selectId.length;t<r;t++)Object(l.c)(this.selectId[t]).then(function(r){delete e.selectId[t]});setTimeout(this.fetchData,3e3)}}},d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"components-container",staticStyle:{height:"100vh"}},[r("el-card",[r("div",{staticClass:"head-lavel"},[r("div",{staticClass:"table-button"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:""},on:{click:function(t){e.addForm=!0}}},[e._v("新建用户")])],1),e._v(" "),r("div",{staticClass:"table-search"},[r("el-input",{attrs:{placeholder:"搜索 ..."},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchClick(t)}},model:{value:e.listQuery.search,callback:function(t){e.$set(e.listQuery,"search",t)},expression:"listQuery.search"}},[r("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},on:{click:e.searchClick},slot:"suffix"})])],1)]),e._v(" "),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection"}}),e._v(" "),r("el-table-column",{attrs:{prop:"username",label:"用户名",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"email",label:"Email"}}),e._v(" "),r("el-table-column",{attrs:{prop:"skype",label:"Skype"}}),e._v(" "),r("el-table-column",{attrs:{prop:"groups",label:"所在组"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"name-wrapper",staticStyle:{"text-align":"center"},attrs:{slot:"reference"},slot:"reference"},e._l(t.row.groups,function(t){return r("el-tag",{key:t,attrs:{type:"success"}},[e._v(e._s(t))])}))]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"roles",label:"角色"}})],1)],1),e._v(" "),r("div",{staticClass:"table-footer"},[r("div",{staticClass:"table-button"},[r("el-button",{attrs:{type:"danger",disabled:e.butstatus},on:{click:e.deleteForm}},[e._v("删除用户")])],1),e._v(" "),r("div",{staticClass:"table-pagination"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pagesize,"page-size":e.listQuery.limit,layout:e.pageformat,total:e.tabletotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)])]),e._v(" "),r("el-dialog",{attrs:{visible:e.addForm},on:{"update:visible":function(t){e.addForm=t}}},[r("add-user",{on:{DialogStatus:e.getDialogStatus}})],1),e._v(" "),r("el-dialog",{attrs:{visible:e.editForm},on:{"update:visible":function(t){e.editForm=t}}},[r("edit-user",{attrs:{rowdata:e.rowdata},on:{DialogStatus:e.getDialogStatus}})],1)],1)},p=[],f={render:d,staticRenderFns:p},g=f,h=r("VU/8"),v=a,b=h(m,g,!1,v,null,null);t.default=b.exports},WoU3:function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,"",""])},"h+OL":function(e,t,r){"use strict";function a(e){r("uDu5")}Object.defineProperty(t,"__esModule",{value:!0});var s=r("vMJZ"),o={components:{},data:function(){return{ruleForm:{username:"",email:"",skype:"",is_active:"",group:"",roles:"",password:"qwert@12345"},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,type:"email",message:"请输入正确的Email地址",trigger:"blur"}],skype:[{required:!0,message:"请输入正确的Skype地址",trigger:"blur"}],group:[{required:!0,message:"请选择用户分组",trigger:"change"}],roles:[{required:!0,message:"请选择用户角色",trigger:"blur"}]},groups:"",roles:""}},created:function(){this.getGroups(),this.getRoles()},methods:{postForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Object(s.j)(t.ruleForm).then(function(e){"ok"===e.statusText&&t.$message({type:"success",message:"恭喜你，新建成功"})}).catch(function(e){t.$message.error("新建失败"),console.log(e)})}),this.$emit("DialogStatus",!1)},resetForm:function(e){this.ruleForm.hosts=[],this.$refs[e].resetFields()},getHosts:function(e){this.ruleForm.hosts=e},getGroups:function(){var e=this;Object(s.d)().then(function(t){e.groups=t.data.results})},getRoles:function(){var e=this;Object(s.e)().then(function(t){e.roles=t.data.results})},setPasswd:function(){this.ruleForm.password=Math.random().toString(35).slice(2)}}},l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Email",prop:"email"}},[r("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Skype",prop:"email"}},[r("el-input",{model:{value:e.ruleForm.skype,callback:function(t){e.$set(e.ruleForm,"skype",t)},expression:"ruleForm.skype"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户分组",prop:"group"}},[r("el-select",{attrs:{placeholder:"请选择用户分组"},model:{value:e.ruleForm.group,callback:function(t){e.$set(e.ruleForm,"group",t)},expression:"ruleForm.group"}},e._l(e.groups,function(e){return r("el-option",{key:e.name,attrs:{value:e.name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否激活",prop:"is_active"}},[r("el-switch",{attrs:{"on-text":"oo","off-text":"xx"},model:{value:e.ruleForm.is_active,callback:function(t){e.$set(e.ruleForm,"is_active",t)},expression:"ruleForm.is_active"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色",prop:"group"}},[r("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.ruleForm.roles,callback:function(t){e.$set(e.ruleForm,"roles",t)},expression:"ruleForm.roles"}},e._l(e.roles,function(e){return r("el-option",{key:e.name,attrs:{value:e.name}})}))],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.postForm("ruleForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("清空")])],1)],1)},i=[],n={render:l,staticRenderFns:i},u=n,c=r("VU/8"),m=a,d=c(o,u,!1,m,null,null);t.default=d.exports},n4T2:function(e,t,r){"use strict";function a(e){r("PyEn")}Object.defineProperty(t,"__esModule",{value:!0});var s=r("vMJZ"),o={components:{},props:["rowdata"],data:function(){return{changePass:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,type:"email",message:"请输入正确的Email地址",trigger:"blur"}],skype:[{required:!0,message:"请输入正确的Skype地址",trigger:"blur"}],group:[{required:!0,type:"array",message:"请选择用户分组",trigger:"change"}],roles:[{required:!0,message:"请选择用户角色",trigger:"blur"}]},groups:"",roles:""}},created:function(){this.getGroups(),this.getRoles()},methods:{postForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.rowdata.password="qwert@12345",Object(s.g)(t.rowdata.id,t.rowdata).then(function(e){"ok"===e.statusText&&t.$message({type:"success",message:"恭喜你，更新成功"})}).catch(function(e){t.$message.error("更新失败"),console.log(e)})}),this.$emit("DialogStatus",!1)},getHosts:function(e){this.rowdata.hosts=e},getGroups:function(){var e=this;Object(s.d)().then(function(t){e.groups=t.data.results})},getRoles:function(){var e=this;Object(s.e)().then(function(t){e.roles=t.data.results})},setPasswd:function(){this.rowdata.password=Math.random().toString(35).slice(2),console.log(this.rowdata.password)}}},l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.rowdata,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.rowdata.username,callback:function(t){e.$set(e.rowdata,"username",t)},expression:"rowdata.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Email",prop:"email"}},[r("el-input",{model:{value:e.rowdata.email,callback:function(t){e.$set(e.rowdata,"email",t)},expression:"rowdata.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Skype",prop:"email"}},[r("el-input",{model:{value:e.rowdata.skype,callback:function(t){e.$set(e.rowdata,"skype",t)},expression:"rowdata.skype"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户分组",prop:"group"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择用户组"},model:{value:e.rowdata.group,callback:function(t){e.$set(e.rowdata,"group",t)},expression:"rowdata.group"}},e._l(e.groups,function(e){return r("el-option",{key:e.name,attrs:{value:e.name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否激活",prop:"is_active"}},[r("el-switch",{attrs:{"on-text":"oo","off-text":"xx"},model:{value:e.rowdata.is_active,callback:function(t){e.$set(e.rowdata,"is_active",t)},expression:"rowdata.is_active"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色",prop:"group"}},[r("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.rowdata.roles,callback:function(t){e.$set(e.rowdata,"roles",t)},expression:"rowdata.roles"}},e._l(e.roles,function(e){return r("el-option",{key:e.name,attrs:{value:e.name}})}))],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.postForm("ruleForm")}}},[e._v("提交")])],1)],1)},i=[],n={render:l,staticRenderFns:i},u=n,c=r("VU/8"),m=a,d=c(o,u,!1,m,null,null);t.default=d.exports},nOvW:function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,"",""])},uDu5:function(e,t,r){var a=r("nOvW");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("53c4573f",a,!0)}});